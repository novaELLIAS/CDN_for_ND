linux防火墙命令

Centos 7 firewall 命令：

 

查看已经开放的端口：

 

firewall-cmd --list-ports

 

开启端口

 

firewall-cmd --zone=public --add-port=80/tcp --permanent

 

 

命令含义：

 

–zone #作用域

 

–add-port=80/tcp #添加端口，格式为：端口/通讯协议

 

–permanent #永久生效，没有此参数重启后失效

 

重启防火墙

 

firewall-cmd --reload #重启firewall

systemctl stop firewalld.service #停止firewall

systemctl disable firewalld.service #禁止firewall开机启动

 

-------------------------------------------------------------------------------------------------------

CentOS 7 以前版本 iptables 命令

 

如要开放80，22，8080 端口，输入以下命令即可

 

/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT

/sbin/iptables -I INPUT -p tcp --dport 22 -j ACCEPT

/sbin/iptables -I INPUT -p tcp --dport 8080 -j ACCEPT

 

 

然后保存：

 

/etc/rc.d/init.d/iptables save

 

 

查看打开的端口：

 

/etc/init.d/iptables status

 

 

关闭防火墙

1） 永久性生效，重启后不会复原

 

开启： chkconfig iptables on

 

关闭： chkconfig iptables off

 

2） 即时生效，重启后复原

 

开启： service iptables start

 

关闭： service iptables stop

 
centos7及以后版本防火墙命令范本：
 
1，执行firewall-cmd --permanent --zone=public --add-port=3306/tcp，提示FirewallD is not running
 
2，通过systemctl status firewalld查看firewalld状态，发现当前是dead状态，即防火墙未开启
 
3，通过systemctl start firewalld开启防火墙，没有任何提示即开启成功。
 
4，再次通过systemctl status firewalld查看firewalld状态，显示running即已开启了。
 
5，再次执行执行firewall-cmd --permanent --zone=public --add-port=3306/tcp，提示success，表示设置成功，这样就可以继续后面的设置了。
 
6，开启新端口（永久有效）
firewall-cmd --zone=public --add-port=80/tcp --permanent
 
7，重启防火墙生效
firewall-cmd --reload #重启firewall
 
8，关闭防火墙
systemctl stop firewalld.service #停止firewall
 
9，禁止防火开机启动
systemctl disable firewalld.service #禁止firewall开机启动